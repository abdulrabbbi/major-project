<% layout("layouts/boilerplate") %>

<body>
  <div class="row">
    <div class="col-8">
      <div class="card col-8 offset-2">
        <br>
        <!-- Listing Card -->
        <h1><%= list.title %></h1>
        <br>
        
        <!-- Listing Image -->
        <img
          class="card-img-top img-fluid"
          src="<%= list.image %>"
          alt="Card image cap"
          style="width: 100%; height: 250px; object-fit: cover;"
        />
        
        <!-- Listing Details -->
        <div class="card-body">
          <p class="card-text">
            <ul>
              <li><%= list.description %></li>
              <li>Rs: <%= list.price.toLocaleString('en-PK') %></li>
              <li><%= list.location %></li>
              <li><%= list.country %></li>
            </ul>
          </p>
          
          <!-- Action Buttons: Edit and Delete -->
          <div class="btn-container">
            <form action="/listing/<%= list.id %>/edit" method="get">
              <button type="submit" class="btn btn-dark add-btn btn-styled">Edit</button>
            </form>

            <form action="/listing/<%= list._id %>/delete?_method=DELETE" method="POST">
              <button type="submit" class="btn btn-dark delete-btn btn-styled">Delete</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <br>

  <!-- Review form for listing -->
  <div class="row">
    <!-- Review Form Container with offset for centering -->
    <div class="offset-1 col-7 mb-3">
      <hr>
      <h4>Leave a Customer Review</h4>
      
      <!-- Form to submit a new review with rating and comment fields -->
      <form action="/listing/<%=list.id  %>/review" method="POST">
        
        <!-- Rating Input: Allows the user to select a rating using a range slider -->
        <div class="mt-3 mb-3">
          <label for="rating" class="form-label">Rating</label>
          <input 
            type="range" 
            name="review[rating]" 
            id="rating" 
            class="form-range" 
            min="1" 
            max="5"
            step="1" 
            required
          >
        </div>
        
        <!-- Comment Input: Text area for users to leave detailed feedback -->
        <div class="mt-3 mb-3">
          <label for="comment" class="form-label">Comment</label>
          <textarea 
            name="review[comment]" 
            id="comment" 
            class="form-control" 
            placeholder="Share your experience" 
            rows="4"
            required
          ></textarea>
        </div>
        
        <!-- Submit Button: Submits the form data to the specified action URL -->
        <button type="submit" class="btn btn-outline-dark review-submit-btn btn-styled">Submit</button>
        
      </form>
    </div>
  </div>
</body>
</html>
